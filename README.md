# Authors

Rafael da Fonseca Fernandes nºmec:95319

Gonçalo Junqueira nºmec:95314

# Functioning
run.py is an executable program that will ask the user which action the user will want from indexing, to search and finally analyze while giving the option to exit.
All three options will ask a series of questions for the tokenizer :
- Minimum len of term, anything bellow will be deleted
- Stopwords (NLTK or user defined) If user defined he will be asked to write the words
- PorterStemmer, allow the user to pick between Snowball or NLTK
- All the previous questions do have an option to be skipped if desired
With these questions answered for the program to know how to perform the tokenizer, it will then run the first option that the user chose.
During indexing there is a variable called "finalFileNames" in the program run.py that holds how the merging files will be devided. To get this devision the user must run an analyze, copy the results and paste them in the variable.
If the option chosen is "search" the user will be asked the program will ask what the query is and which method the user prefer to go with (bm25, lnc-ltc), if the choise was bm25 it will later ask the values of k1 and b. At the end it will print the result in the form of term:idf;doc1:score;doc2:score and save the result in a txt file having the query as it's name.

The following files must be created beforehand to ensure proper run next to where the program is placed:
- queryResults
- indexIncomplete
- indexCompleteWeight
- indexCompleteNormalized
- importantValues
- IDFIndex
- documentLength
- documentIndex


# Data Structures:
The program is devided in to three parts, the "run.py", "query.py" and finally the "document.py" the last two being classes.
Run - Can be seen as the main of the program, calls and creates all the necessary classes and runs the methods needed to ensure the program does as it was asked.
Document - This class will be responsible for indexing, merging and analyzing the file and will create the various files required for many of the funcions and calculations done throughout the program.
Query - After merging as been completed we can start searches since it needs certain files that are created during the indexing. This class holds all the necessary methods to ensure the a search is done such as calculating the bm25 values to lnc-ltc and many more.

# Special mention
- In the class "document" the method "sortAndWritteDocumentLengthDictionary" has a line that orders a dictionary, a dictionary that contains the indexed Id of all documents which of course can take a lot of time for larger files, the reason that we first order this even though we lose a lot of time sorting it is for when we are reading it during queryes, because the indexed document id goes from 0-n we can simply read the line directly knowing that the information we want will be there saving us the time otherwise lost searching through the entire file for that one specific id, multiple times in case of repetetive searches on that file.
- The file \documentIndex\documentIndext.txt is also ordered first before saving for the same reason as above.
- We could make it so that the result given in analyze is automatically placed on the variable "finalFileNames" yet we chose not to do it like that in case the user simply wants to analyze or even have a bit more control on how to devide the files.
- There are some methods that do very similar function such a read a file, split the values then add them on the dictionary so the differences are minimalistic, what usually does vary from these methods is the position of the value we want to save, sometimes we want a combination of value[0] value[1] value[3] while at other times we might want them all, that is the reason some methods are very similar


# Output
File: amazon_reviews_us_Digital_Music_Purchase_v1_00.tsv.gz

- analysis:

["'-1", "1'-1945", '19456199-2', "2'-28", "28'-34", "34'sec-5", "5'-80", "80'-abscur", 'abseit-acoust', 'acoustason-add', "add'-age", "age'-album", "album'-along", "along'-also", "also'-alway", "alway'-amaz", 'amaza-american', "american'-anoint", 'anointd-anymor', "anymore'-appeal", "appeal'-around", "around'-artist", "artist'-attent", 'attenti-awar', 'awarapan-awesom', 'awesomaz-back', "back'-ballad", "ballad'-band", "band'-bassnectar", "bassnectar'-beatl", "beatle'-beauti", 'beautician-believ', "believ'n-best", "best'-beyond", "beyond'-bit", "bit'-blood", "blood'-bold", "bold'-bought", "bought'-br", "br'-brilliant", "brilliant'-brought", 'broughta-bust', "bust'-buy", "buy'-came", "came'-candl", "candle'-carey", "carey'-catchi", 'catchier-cd', "cd'-chanc", "chance'-check", "check'-choos", 'choosen-christma', "christma'-classic", "classic'-close", "close'-collect", 'collectablb-come', "come'-complet", 'completa-confid', 'confidant-continu', "continua-cosby'", 'cosbyism-countri', 'countribean-crash', "crash'-crosbi", "crosby'-cuz", "cuz'-danc", 'danc3-day', "day'-decid", 'decida-definit', 'definital-depech', "depeche'-devot", "devot'd-dig", "dig'-disappoint", "disappoint'-dj", "dj'-dope", "dope'-download", "download'-driven", "driven'-dvd", "dvd'-easi", 'easier-effect', "effect'-els", 'elsa-end', "end'-enjoy", "enjoy'-ep", "ep'-esso", "esso'-even", 'evenaft-everi', 'everibodi-exactli', 'exactlli-excit', 'excited-explicit', "explicit'-face", "face'-famili", 'familia-fan', "fan'-fast", "fast'-favorit", 'favorita-featur', "feature'-fela", "fela'-fillmor", "fillmore'-find", "find'-first", "first'-five", "five'-focus", "focus'-forgiv", 'forgiven-found', "found'-free", "free'-fulfil", 'fulfild-funer', 'funera-game', "game'-genr", 'genra-get', "get'-give", "give'-go", "go'-gone", "gone'-good", "good'-got", "got'-great", "great'-groundbreak", 'groundbreakingli-guilti', 'guiltier-guy', "guy'-happen", "happen'-harlem", "harlem'-he'", "he''-hear", "hear'-heard", "heard'-heavi", 'heavier-hey', "hey'-highwood", 'highyl-hit', "hit'-honest", "honest'-hopeless", 'hopelessi-howev', "howeve-i'd", "i'd'v-i'm", "i'm'-idol", "idol'-impress", 'impressario-individu', 'individual-inspir', "inspir'd-interest", "interest'-isbel", "isbel'-jame", "jame'-jesu", "jesu'-jolli", 'jollier-k', "k'-keke", "keke'-killer", "killer'-knew", "knew'-knowledg", "knowledge'-ladi", 'ladi6-late', "late'-learn", 'learnabl-lerch', "lerche'-licens", "license'-light", "light'-like", "like'-listen", "listen'-live", "live'-long", "long'-lord", "lord'-loud", "loud'-love", "love'-lyric", "lyric'-mahanttan", 'mahanu-make', "make'-mani", "mani'-master", "master'-may", "may'-medit", 'meditacao-memor', 'memorab-messia', 'messiaah-might', "might'v-minut", 'minuta-mix', "mix'-monster", "monster'-motion", "motion'-movi", 'movia-much', "much'-music", "music'-myspac", "myspam-nature'", "naturebot'-neighborhood", "neighborhood'-never", "never'-new", "new'-nice", "nice'-non", 'nona-notion', 'notiv-ode', "ode'-old", "old'-one", "one'-orchestra", "orchestra'-origin", "origin'-overcom", 'overcomethi-pandora', "pandora'-particular", "particular'-pay", "pay'-pere", "pere'-perform", 'performa-philip', "philip'-pie", "pie'-plain", "plain'-play", "play'-pluck", "pluck'-pop", "pop'-power", "power'-pretend", 'pretenda-princ', 'princapl-product', "product'-psych", "psych'-purchas", 'purchasaew-qualiti', 'qualitit-r', "r'-rambl", 'rambla-rave', 'raveboy-realiti', "realities'-realli", 'reallif-recommend', 'recommenda-recov', 'recoveri-rejuven', 'rejuvin-releas', 'releasd-remind', "remind'-represent", "represent'-reveal", "revealed'-rich", "rich'-ring", "ring'-rock", "rock'-ross", "ross'-sad", "sad'-sane", "sane'-say", "say'-sea", "sea'-see", "see'-send", "send'-set", "set'-shatter", "shatter'-show", "show'-simpl", 'simplament-sing', "sing'-singl", 'singlabl-sleep', "sleep'-smooth", "smooth'-solstic", 'solstiti-sometim', "sometime'-song", "song'-soul", "soul'-sound", "sound'-speak", "speak'-spontan", 'spontana-star', "star'-steam", "steam'-still", "still'-straight", "straight'-stubborn", 'stubbornli-style', "style'-summon", "summoner'-sure", "sure'-switchfoot", "switchfoot'-take", "take'-tap", "tap'-telecast'", 'telecasteri-test', "test'-that'", "that''-thing", "thing'-thoroughli", 'thoroughlygood-three', "three'-time", "time'-toe", "toe'-tool", "tool'-tow", 'towa-track', "track'-trend", 'trenda-true', "true'-tune", "tune'-two", "two'-underr", 'underrart-unlik', 'unlikeli-us', "us'-v2", 'v2000-version', "version'-violin", "violin'-vocalist", "vocalist'-voic", 'voical-wait', "wait'-want", "want'-way", "way'-well", "well'-whitney", "whitney'-william", "william'-without", "without'-wonder", "wonder'-work", "work'-worth", "worth'-would", "would'a-wrong", "wrong'-year", "year'-younger", "younger'-ﾟ"]
Memory used:115790987bytes.

- Search:
Example:
album:0.64;R5C2SOM2LYSFE:0.2;R33TIAYAK7SZ82:0.2;R1YUQL4X3IVJNM:0.19;R1DN6UOTYCZUFJ:0.18;R2G7C8QQ1EJQJA:0.18;R8KERZ6HOGJ5V:0.18;R1WJ6LJFGJCSJB:0.18;RHZ3J39T2FHR1:0.18;ROVEXBVK9A7J9:0.18;RCKKW0HDB3XJ4:0.18;R32H81MDQVWC1V:0.18;R34J2TNZJGST0U:0.18;R1TOHCPB717ZT3:0.18;R3MQF0CX6WBIRQ:0.18;R1FLGDFP9S5I4Y:0.18;R3UK0LB3WFXJB3:0.18;R24HXWUF0P9MHF:0.18;R2ANVULJQV91HV:0.18;R3CQGUL8WXW1AB:0.18;RELW93452N46H:0.18;R291NTXZWKOBCX:0.18;R2ZHL7ZRFOWT3U:0.18;RXZD6UAAW62TF:0.18;R3HOM4MUWNSVYZ:0.18;R1MAYSAM0Y62J8:0.18;R344C7FUFCJ4I1:0.18;R38PISPYP43E9:0.18;RVTNDHNEPSWUX:0.18;R1CO1CLYBKKPWL:0.18;R2NMTS5EM88Z9Z:0.18;R345SZPJEAL0QZ:0.18;R3SB6KUQ14STXB:0.18;R34TWRIBI860WV:0.18;R3RCJMXSCYPTIX:0.18;R21TKFT006KZAF:0.18;RJXIIPWSUZI9G:0.18;R3RHS7OPGTQTUN:0.18;R3IY4GHDV7SVPM:0.18;R1VWFFEYDBFR1S:0.17;R312ZQ3M0UUQ62:0.17;R10H2T60T9SLAT:0.17;RHIQBDSISSGZ7:0.17;R3TJH62EB840RZ:0.17;REAWJ578UGSJT:0.17;R3V0B1SF4ND0L6:0.17;R2BTK309DLVPH4:0.17;R12T1EP2IZ7NWQ:0.17;R2L4D9HULLYK2V:0.17;R3KFII5XRY6IZY:0.17;R2OC2SGGY1M8AL:0.17;R1K040ALRDXI7V:0.17;R2WBCTRICDHQMC:0.16;R1YIZNBM64Q9D0:0.16;R2M8683RIPHRZD:0.16;R2GVR9YCFM9TIF:0.16;R15I70PVSLB1LN:0.16;R19CJS8L8V3Z1X:0.16;R1L3HY08ZCWIV4:0.16;R32QJTIP6SFSKV:0.16;RE840FNIIR11B:0.16;RH0YUSZ3KFIB3:0.16;R3OYR1UH1IY3XQ:0.16;RVHJVSCWBFUAH:0.16;RJ1QZQ7HLDD6U:0.16;R2DRLCKHRWKF28:0.16;R1HM5MY9JZ37UI:0.16;R3NJDMO8KNA3X0:0.16;RHQLF1A7YHGML:0.16;R2Y35MQAGE7V26:0.16;R2QUNB4M3KXRBG:0.16;R1GEE90AYTM3PZ:0.16;R6FII6UWM3QTK:0.16;R137YFUY87WQSX:0.16;R2EJ4QJ33IOYYU:0.16;R2QDVPPCVHN8UI:0.16;R1CYKC2DAQFW9J:0.16;RFQNU1O1UZHX5:0.16;R1Y7CUY46KVFGX:0.16;R6L6HQNGE2I6X:0.16;RZW4Z0PTFRIEH:0.16;R33QR8A6ZQPL7G:0.16;R2PG3CPOF954XT:0.16;R17HGA7V6R1ZUL:0.16;R2P71M2NTV6MOG:0.16;R2LT9XDW8EJHG9:0.16;RNGI143TCU569:0.16;R1NNW2296Y72K4:0.16;REQP0I1SES1MA:0.16;R3LB6YCMFHGVMX:0.16;R2ODHRKLO6PVFM:0.16;R2ZMWDU6KAOF1J:0.16;RWAHBD1627TI4:0.16;R7XVJ77DNVUPF:0.16;RLWFWEYM8GWET:0.16;R2DD03JLKLIUVW:0.16;R5R8KZR89668G:0.16;R3VOYK3GQP2LBT:0.16;R6ATOD2FV85HZ:0.16;R1WMIZA94RGFTM:0.16;R2IMHNLY8ACU9G:0.16;
greatest:1.74;RTSCL3I6EAZKD:0.53;R2P816O9EK8IGU:0.47;RXT0MODOKRHGK:0.45;RQU3TELTRBQFZ:0.45;R21KCCZL3AW4PR:0.44;R9QJZKBO6Z7IA:0.42;R3SBDA48SJ081K:0.42;R2QSNSVXKFGJN:0.42;RRNNAKYEKVD8Q:0.42;R2359LP6VRFU42:0.41;R3N4YMQVSREJVF:0.41;R215SB1078XLF:0.41;R19V4ZG5U1UMSP:0.4;R1BDPV9J0TH0OQ:0.4;RZ6X0XUHUJ8YM:0.4;R2VHLHLYHYXMTD:0.4;R86SVRURMHNKD:0.4;RS02SAC4DLWWL:0.4;R23UJ38UI6DU6O:0.4;R1OD1TQXFI0W9:0.4;R1GPCDKK5PXE2G:0.4;R29265QB8GZGG4:0.4;R15ITR23V9QN6S:0.4;RW2T8DT98Q91A:0.4;R71ZMKBQ7Z5OZ:0.4;R1LFA8R1UUM96X:0.4;RP8LRCWDU9ECE:0.4;R51ZWAPF28Q3I:0.39;R2SGF1AZZQXVTW:0.39;RWJ8RT11H9ZKW:0.39;R1GD2Q4T8EQ0WF:0.39;R23NNTE9CFOB9J:0.39;RA50LXH166BWJ:0.39;R229UAAST93305:0.39;R3289HWOSS2LTA:0.39;R29ADSD1JJ05BI:0.39;RKLSSD0NS4ZMA:0.39;R280NJVKDSP2AQ:0.39;R6S4T2OXRPC1A:0.39;R2AZ7XQXBMJTXE:0.39;R3F639HYCJJ5J2:0.39;R2XPXFEUGVCYGU:0.39;R1ESJFMFCLK3HY:0.39;R2IK5CXWH6HNDU:0.39;RRPHLTU9UIL44:0.39;R31BGFJTUFGLPO:0.39;RQKG1ZDXZBEW2:0.39;R2G8W5IFQUMFUJ:0.39;R1UAY9BTPDIA2R:0.39;R3GA7EJCJ5LBF3:0.39;R2G54DBKSPQNHY:0.39;R3TFE7RC9A4S67:0.39;R2Z9KSSS7F0KQH:0.39;R1TF3J4LPZR0RH:0.39;R1TY2DB07TIRVJ:0.39;R2KSZ1GFS6U0WJ:0.39;R1F5AKGW0RD5K9:0.39;R2WIHY58GN6AI8:0.39;R1FGM9RA3OFJDF:0.39;R2LBFLJJJRHUVI:0.39;R38B20VIPYWJY5:0.39;R28CQEPRCCMG5Y:0.38;R3Q9JQZ27Z4W5M:0.38;R2EWALABAF8OS2:0.38;R4I3HOJXF4VCU:0.38;RBE8QXL0N4B1L:0.37;R3VBI7RL31HDFE:0.37;R3FF1CPLT71439:0.37;R1GJKL9YUFOF0R:0.37;R860URR4KZNZL:0.37;R2PME6OOKLJ33W:0.37;R35S48VWJ6S59Z:0.37;R32PH54OI6RK11:0.37;R3K4SQQO3KAHSK:0.37;R1S4WDBADE9W1L:0.36;R28RZEM7L0DSHE:0.36;R29LGSH2LBAF7J:0.36;RGJ0LUW1U4MSH:0.36;RJ1ZRPC0MMU7Z:0.36;RMTWI2LS3IQ5C:0.36;R2TPJLW486Z5NI:0.36;R3S0SW2ADC4DRZ:0.36;RB56MZNKVQTHW:0.36;RGY8ZQ1PC7Z58:0.36;R4MW6SASFJ67F:0.36;R2N9970DLMTK6P:0.36;R2Q89TIQC7GVO1:0.36;R3N98N7CQPBY5T:0.36;R1UDJSWYVW7X6V:0.36;R2JD50L4N1OFSV:0.36;RP2AMTOBIBLTL:0.36;R1LRS57OFHQYAI:0.36;R7GTUNB9Q46YG:0.36;R1O9P0K3EM1NTT:0.36;RE55ZJTVTYI65:0.36;R3RH3A4HVBFWB6:0.36;RQUFDFDDPOGRC:0.36;R1K6X0ISR1GG7B:0.36;R2OD696R7WGJX0:0.36;RZR7NI6SZ1BQN:0.36;
rock:1.26;R3BV04S7M0DZ2B:0.56;R2RHQR5ZJ13KKU:0.56;RLL5F5QSHUVBR:0.45;R26J3R3T44NW15:0.45;R24JYEHAW5Q79B:0.45;R2OB7NO8Y8N3KZ:0.45;RCAJZ9OM8M6CX:0.45;R27LTQSUPUPJ6M:0.45;RTSH5Y80RKO5T:0.45;R1Z6DN6GJUNN3V:0.45;R1KM7226HR0PFD:0.45;R3JIJ5AA31BAX9:0.45;R1YASF8DPU7791:0.41;RSEHM2Z69AC06:0.41;R3RN79JU41N5K0:0.38;RD9PUD5LMWFEO:0.38;R16I2F8JY4V444:0.38;R1OPAQ9RN0UR0S:0.38;R1Y8BDY9I1478:0.38;R2CJD7MMKN496W:0.38;R3FCMZ9OLGJDP4:0.38;R3V3A4RMIV8VQV:0.38;R1MA831RM5M2QT:0.38;R157R31RINNL7S:0.38;R3GR1Z4944KX5N:0.38;R121S9DLQK2V9W:0.38;R246RR3X4APA6C:0.38;R3ULA10OJ3NISU:0.38;R29VD4S5UBUDPQ:0.38;R1WU310I95BBFH:0.38;RF6RZ2H4Z3G9U:0.38;R315J3HRVUVGRO:0.38;RX8H4N4DENGQD:0.37;R2BOI70JBZ1XOD:0.37;RECT17LNRU8PM:0.35;R3S35PQYVGLA95:0.35;R1YL8JSXDHXMSU:0.35;R3UB882SZ3RM7S:0.34;ROQHVSNJ41JPJ:0.34;R3Q44NTU4T0X0U:0.34;R152C8269JF5GI:0.34;R2KTS2KYYM4H5H:0.34;R16Z8R3PXF23NX:0.34;R1PQCLHTQ410HN:0.34;R36ICFMXUD5WVX:0.34;R3MGMJK959JQ5G:0.34;R8ZXB3HQ0VTD8:0.34;R1DVKHV4ULR0E7:0.34;R1KVJLUZY03FJ0:0.34;R3T5DL5EQGB4TE:0.34;R2YCY981CINQR0:0.34;R31JZ1CIMNWOY:0.34;R12Y5EESRSJMKT:0.34;R3J601JGZGLKT1:0.34;RC0KQXGUF184I:0.34;RPL14XEOAJQKM:0.34;RHJ9PGLCJ3V6W:0.34;R1DA819NQ8SKCV:0.34;R3BGDEMT2JKEM9:0.34;R4JWURP1AW15M:0.34;RKYUL6ODLEUSA:0.34;R2HHDFLJWPC44Z:0.33;R38P55DLXD3CCB:0.32;R3P3675E3NUJ5N:0.32;R2WAYP8ECVH919:0.32;RWERFV22GSK0J:0.32;R1E0IFMD0QROX4:0.32;R3HYWD7ZP7BH1X:0.32;R26B56PRLHZ8YG:0.32;R22VC9G10BGVH8:0.32;R2X47AIIA7P13H:0.32;R2DKIDNL4UK1CD:0.32;R2MUJ34A07UIRK:0.32;RO5FWN4FG0ZAY:0.32;R1JFB8S1TNLGKA:0.32;R2GS2LP82PK5CQ:0.32;R3QLXBZA2PIER4:0.32;R2JWTOJWB0H1NQ:0.32;R1C6EL7DUDAK9C:0.32;RQKAZA6NKEPJ4:0.32;R33JAFY0NZDG58:0.32;R137YFUY87WQSX:0.32;R2EJ4QJ33IOYYU:0.32;R2QDVPPCVHN8UI:0.32;R1X1RW9NK0LENN:0.32;R29J2WUH7KCSH6:0.32;R1RZNMSFOR2J3E:0.32;RN1RGMSK5IU8E:0.32;RQWDIYUA7RN5X:0.32;R2HI9ESD9TVCU5:0.32;R3JQ6KZNHB2N8D:0.32;ROYUH92PNDEI6:0.32;RGKC3DBRUU0YL:0.32;R3TYX13FXV0AI3:0.31;R2BY2EUY8ZP8SF:0.31;R3SJXV9TQWSOZZ:0.31;R1CG0QIVMIX2E4:0.31;R21V54W79LB4HR:0.31;R1S36X8R084QIC:0.31;R1H7DI0TNP7ZWJ:0.31;
Tempo que demora a fazer um search: 355.87491393089294
Time it takes to do the search: 613.7385129928589s
Memory used:2936852732bytes

- Indexing:

Temporary index number: 383
Numero total de termos: 389976
File size index:131072
Time it takes to do the indexing: 19171.98884177208s
Memory used:6283504979bytes